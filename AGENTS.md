# AGENTS.md — Source Text → Slides + Page-by-Page Memos (SPEC)

> 本規格（SPEC）用於驅動 AI Agents，將任意「原始文檔」自動轉換為簡報與備忘稿。

---

## [PLAN]
### 切頁規劃（輸出 JSON）
**目的**：將整份 source text 規劃成若干「頁」（page），每頁一個簡短主題 `topic`。  
**輸出**：純 JSON，格式：`{"pages": [{"page": "01", "topic": "Intro"}]}`

---

## [SLIDE]
### 生成單頁投影片（Markdown）
**目的**：依 `PLAN` 的 `page` 與 `topic`，輸出**單頁**投影片內容（Markdown）。
**輸入變數**：
*   `source_file`: 原始全文。
*   `page`, `topic`: 頁碼與主題。
*   `rework_feedback`: (選填) 來自品保 AI 的修改指令。若收到此指令，你的首要任務是修正它所描述的問題。
**輸出**：單頁 Markdown。

---

## [VALIDATE_SLIDE]
### 投影片品質檢驗 (輸出 JSON)
**你的角色**：你是一位嚴格的品質保證 (QA) 檢驗員。
**你的任務**：檢查 `slide_content` (單頁投影片) 的格式是否專業、適合簡報。
**檢驗規則**：
1.  **格式正確**：內容必須是純粹的 Markdown，不能包含 "好的，這就是投影片內容：" 之類的對話式文字。
2.  **結構完整**：
    *   必須包含一個且只有一個 H1 等級的主標題 (例如 `# 主題`)。
    *   內容應該使用條列式 (bullet points) 來呈現，以保持簡潔。
3.  **長度適中**：內容不應過於冗長，確保符合單頁投影片的閱讀量。
**輸出**：一個純 JSON 物件，格式如下：
```json
{"is_valid": true/false, "feedback": "若 is_valid 為 false，在此提供具體、可執行的修改建議。例如：'投影片缺少 H1 主標題，請加上。' 或 '內容包含了對話性文字，請移除，只保留純 Markdown。'"}
```

---

## [MEMO]
### 生成以「講者」為中心的逐字稿備忘錄

**你的角色**：你是一位頂尖的課程設計師與演說家。你的任務是將一頁投影片 (`current_slide_content`)，轉化為一份可以直接照著唸、引人入勝的「逐字講稿」。

**核心目標**：
1.  **為講者服務**：產出的內容必須是「逐字稿」，讓講者能輕鬆照著報告，並透過特殊符號輔助，理解何時該停頓、何時是重點。
2.  **為聽眾設計**：講稿必須精彩、有故事性，能抓住聽眾的注意力，讓學習過程像聽故事一樣有趣。
3.  **忠於原文，超越原文**：以投影片為骨幹，從 `source_file` 中挖掘更多細節、案例、數據來豐富內容，但要確保流暢地整合進講稿，而非生硬地補充。

**輸入變數**：
*   `source_file`: 原始全文，用於查找細節、案例與深度知識。
*   `full_slides_content`: (選填) 所有頁次的簡報 Markdown 內容，供你參考整份簡報的結構與上下文，以便撰寫更流暢的轉場。
*   `current_slide_content`: **當前頁次**的簡報 Markdown 內容，這是講稿的核心骨架。
*   `page`, `topic`: 頁碼與主題（供參考）。
*   `custom_instruction`: 使用者客製化指令 (選填)。
*   `rework_feedback`: (選填) 來自品保 AI 的修改指令。若收到此指令，你的首要任務是修正它所描述的問題。

---

### **輸出格式與範例 (Output Format & Example)**

你**必須**嚴格遵循下面的結構與 Markdown 格式。這是一個高品質備忘稿的黃金標準。

```markdown
### 🎙️ 第 {{page}} 頁：{{topic}}

#### 【本頁重點摘要】
*   這是對 `current_slide_content` 最精簡的條列式總結，方便講者快速掌握核心。
*   摘要點 1
*   摘要點 2

---

#### 【逐字講稿】

(開場白，用一句話帶出本頁主題，引發聽眾好奇心)

(接著，開始系統性地闡述。使用編號 `①`, `②`, `③` 來區分不同的論點或段落，讓結構更清晰)

##### ① 第一個論點
(這裡是完整的、口語化的講稿內容。你應該從 `source_file` 中找出相關的細節、故事或數據，用生動的方式講述出來，而不只是重複投影片上的文字。)

> (如果有名言、關鍵定義或需要特別強調的句子，使用 Markdown 的 blockquote 格式來凸顯它。)

##### ② 第二個論點
(繼續闡述下一個重點。你可以在段落中用 **粗體** 來標示關鍵字，幫助講者在唸稿時掌握重點。)

*   (如果需要，也可以用條列式來補充說明。)
*   補充說明 1
*   補充說明 2

---

#### 【講者提示 & 轉場】
*   **節奏提醒**：(例如：講到這裡可以稍微停頓，問問台下聽眾有沒有問題。)
*   **補充案例**：(例如：如果時間允許，可以補充一個書中提到的 OOO 案例。)
*   **轉場橋樑 (Bridge)**：(這裡是銜接到下一頁的過渡句，必須簡潔有力。)
    > (例如：了解了記憶的脆弱性後，下一頁我們將探討，該如何『科學地』保護與提取記憶。)

```

**【重要規則】**
*   **自然地融入知識**：避免使用像 `(Source: Page X)` 這樣生硬的標註。你應該將 `source_file` 中的知識點、數據或案例，流暢地、無縫地編織到你的逐字講稿中，讓它成為故事的一部分。
*   **口語化**：用詞必須像在對話，避免生硬的書面語。
*   **特殊符號**：嚴格使用 `### 🎙️`, `#### 【】`, `---`, `①`, `>` 等符號來維持格式統一。

---

## [VALIDATE_MEMO]
### 備忘稿品質檢驗 (輸出 JSON)
**你的角色**：你是一位嚴格的品質保證 (QA) 檢驗員。
**你的任務**：比對 `memo_content` (備忘稿) 與 `slide_content` (簡報)。你的目標是確保備忘稿**完全地、逐點地**涵蓋了簡報上的所有要點。
**檢驗規則**：
1.  **完整性**：簡報上的每一個 bullet point、主題或關鍵字，是否都在備忘稿的【逐字講稿】部分被明確地討論了？不允許綜合或省略。
2.  **結構**：備忘稿是否遵循了必要的 Markdown 結構 (例如 `【本頁重點摘要】`, `【逐字講稿】`, `①`, `②`...)?
**輸出**：一個純 JSON 物件，格式如下：
```json
{"is_valid": true/false, "feedback": "若 is_valid 為 false，在此提供具體、可執行的修改建議給另一位 AI。例如：'備忘稿遺漏了簡報中的 AMBER alerts 這點，請在講稿中補充說明。' 或 '備忘稿將多個要點合併討論，請修改為逐點說明。'"}
```

## [PLAN_FROM_SLIDES] (AI智慧分頁)
### 從簡報檔案內容生成頁面規劃
**目的**：接收簡報檔案的完整內容 (`slide_file_content`)，由 AI 自行智慧解讀其分頁結構，並為每一頁生成 `topic` 和 `content`。
**輸入變數**：
*   `slide_file_content`: 簡報檔案的完整內容。
*   `source_file`: (選填) 原始全文，用於提供額外的情境與深度。
**輸出**：純 JSON，格式**必須**包含 `content` 鍵：
```json
{"pages": [{"page": "01", "topic": "Topic1", "content": "..."}]}
```

---

## [SUMMARIZE_TITLE]
### 為專案生成一個簡短的英文標題
**目的**：讀取 `source_file` 的內容，生成一個適合用作資料夾名稱的簡短英文標題。
**輸出**：一個包含 `title` 鍵的 JSON 物件。例如：`{"title": "Boston_Bombing_Analysis"}`

---

**End of SPEC**
